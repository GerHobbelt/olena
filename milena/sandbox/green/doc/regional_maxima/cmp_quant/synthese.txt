Expérimentation des différentes quantifications pour regmax sur mp00082c_50p.ppm
================================================================================

Processus
---------

La chaine regmax se compose de la sorte:
1) Chargement de l'image initiale [image couleur 8 bits], appelée i0_input.
2) Quantification de i0_input en x bits, résultat appelé i1_input_qx.
3) Calcul de l'histogramme couleur (3d rgb) sur i1_input, appelé h1_input_qx.
4) Filtrage morphologique (ouverture volumique) de h1_input, appelé h2_input_qx.
5) Labelisation des maximaux regionnaux sur h2_input, résultat dans l2_histo_qx.
6) Influence géodésique restreinte sur l2_histo, résultat appelé l5_histo_qx.


Résultats
---------

1) Histogramme 8 bits couleur rgb (visu proj r/g) de i0_input, appelé h0_input.
2) Image initiale labelisée (quantifé 2/3/4/5/6/7/8 bits), appelée l5_input_qx.
3) Image des couleurs moyennes de chaque classe (toutes versions), i5_mean_qx.
4) Image de transparence des couleurs (except label 0), appelé i5_merge_qx.
5) Histogramme 8 bits couleur rgb (visu proj r/g) de i5_mean, appelé h5_mean_qx.
6) Histogramme 8 bits couleur rgb (visu proj r/g)de i5_merge,appelé h5_merge_qx.
7) Statistiques (étiquette, couleur moyenne, effectif, %image, %classés).

Les fichiers générés sont donc h0_input.pgm, l5_input_q2.pgm, l5_input_q3.pgm,
l5_input_q4.pgm, l5_input_q5.pgm, l5_input_q6.pgm, l5_input_q7.pgm,
l5_input_q8.pgm, i5_mean_q2.ppm, i5_mean_q3.ppm, i5_mean_q4.ppm, i5_mean_q5.ppm,
i5_mean_q6.ppm, i5_mean_q7.ppm, i5_mean_q8.ppm, i5_merge_q2.ppm,
i5_merge_q3.ppm, i5_merge_q4.ppm, i5_merge_q5.ppm, i5_merge_q6.ppm,
i5_merge_q7.ppm, i5_merge_q8.ppm, h5_mean_q2.pgm, h5_mean_q3.pgm,
h5_mean_q4.pgm, h5_mean_q5.pgm, h5_mean_q6.pgm, h5_mean_q7.pgm, h5_mean_8.pgm,
h5_merge_q2.pgm, h5_merge_q3.pgm, h5_merge_q4.pgm, h5_merge_q5.pgm,
h5_merge_q6.pgm, h5_merge_q7.pgm, h5_merge_q8.pgm, s5_histo_q2.txt,
s5_histo_q3.txt, s5_histo_q4.txt, s5_histo_q5.txt, s5_histo_q6.txt,
s5_histo_q7.txt, s5_histo_q8.txt.


Note implémentation sur les histogrammes projetés
-------------------------------------------------

Les images de sorties (i5_mean_qx.ppm et i5_merge_qx.merge) sont des images
couleurs construites en 8 bits à partir de l'image originale. Les classes qui
ont servi pour la construction de ces images ont été élaborées, elles, dans un
espace de quantification moindre (q = 2, 3, 4, 5, 6, 7 ou 8). Les histogrammes
relatifs à ces images sont donc en 8 bits et on les compare à l'histogramme 8
bits de l'image initiale h0_input.pgm.


Analyse des statistiques
------------------------

L'analyse des statistiques des classes obtenues par la technique regmax peut
être résumée par le tableau ci-dessous. En changeant la quantification, nous
axerons notre attention sur le nombre de classes obtenues, sur le pourcentage
dans l'image de l'étiquette 0 (les couleurs non classées), le nombre
d'étiquettes dominantes, le pourcentage en couleurs classées de la plus petite
classe dominante et celle de la plus grande classe dominante.

Quantif° | Nb classes | % etiq 0 | Nb étiq dominantes | % Min (cl) | % Max (cl)
-------------------------------------------------------------------------------
    2    |      2     |   0.00 % |       2            |   27.91%   |  72.09%
    3    |      7     |   0.00 % |       2            |   18.80%   |  64.07%
    4    |     15     |   0.69 % |       2            |   14.60%   |  64.14%
    5    |     30     |   3.66 % |       4            |   12.99%   |  24.74%
    6    |     30     |   8.43 % |       8            |    4.66%   |  17.00%
    7    |     29     |  29.54 % |      13            |    3.10%   |  12.97%
    8    |     72     |  49.33 % |       9            |    1.93%   |   9.58%

Une permière information à donner sur la construction du tableau: La
segmentation des classes en dominantes et non dominantes est réalisée
subjectivement et de manière manuelle (un compromis entre le pourcentage et la
correspondance dans la scène de la dite classe). Si jusqu'à la quantification
5 incluse, il n'y a pas réellement d'ambiguïté (l'étude du pourcentage suffit),
au delà, il semble que la segmentation devienne difficile, voire impossible à
réaliser sur les critères retenus. Les seuils retenus, le nombre d'étiquettes
dominantes deviennent très criticables.

Tout d'abord, nous observons que le nombre total de classes explosent (de 2 à
72)lorsque la quantification augmente (de 2 vers 8). L'étiquette 0 commence à
prendre de l'importance à partir de la quantification 5 (- de 4%) et devient
incontournable à la quantification 8 (presque 50%). Le nombre d'étiquettes
dominantes à tendance à croître, ce qui signifie que les mêmes objets de scène
finissent par être représentés par plusieurs classes. Typiquement, le fond de
l'article correspond à une classe à la quantification 2, correspondra à 3
classes à la quantification 5 et beaucoup plus à la quantification 8. Dans le
même temps, chaque classe devient de moins en moins représentative parmi les
couleurs classées. Ceci s'oberve à la fois par le pourcentage de la plus petite
classe dominante et celui de la plus grande classe dominante, ces deux
informations diminuent simultanément.

Lorsque la quantification commence à être importante, la segmentation en classes
dominantes doit arbitrer entre sélectionner les quelques étiquettes qui se
détachent encore un peu du point de vue statistique mais ne représentent plus
de manière satisfaisante les éléments composant le fond de l'image et aggréger
des étiquettes à très faible représentativité qui amèneront plus d'information
mais aussi beaucoup plus de bruit (information non relative au fond de l'image).

A faible quantification, le nombre de couleurs choisies pour représenter la
scène est trop restreint, mélangeant ainsi des informations du fond avec celles
des autres objets au devant de la scène (effet typique d'une binarisation brute
de fonderie et mal contrôlée).


Analyse des images de merge
---------------------------

Nous nous concentrons maintenant sur les images i5_merge_q2.ppm,
i5_merge_q3.ppm, i5_merge_q4.ppm, i5_merge_q5.ppm, i5_merge_q6.ppm,
i5_merge_q7.ppm, i5_merge_q8.ppm. Ces images nous montrent la position de
l'étiquette 0 (en rouge sur ces images). Alors que cette étiquette est absente
dans les images relatives aux quantifications 2 et 3, elle prend de plus en plus
d'importance à mesure que la quantification augmente. A la quantification 4,
l'étiquette 0 est restreinte à la photographie au centre de l'article
(principalement l'estrade). A la quantification 5, l'étiquette 0 gagne les
écrans et la légende de la photographie. A partir de la quantification 6, jusqu'
à la quantification 8, l'étiquette 0 qui était jusque là cantonnée dans la
photographie se retrouve aussi à l'extérieur de manière éparpillée.
L'étiquette 0 prend de plus en plus d'importance à la fois à l'intérieur de la
photographie, mais aussi à l'extérieur. A la quantification 8, la classe 0 est
tellement importante que le texte de l'article est complètement illisible.


Analyse des images de mean
--------------------------

Nous nous concentrons maintenant sur les images i5_mean_q2.ppm,
i5_mean_q3.ppm, i5_mean_q4.ppm, i5_mean_q5.ppm, i5_mean_q6.ppm,
i5_mean_q7.ppm, i5_mean_q8.ppm. Ces images reconstruites à l'aide d'un faible
nombre de couleurs (les couleurs moyennes de chaque classe) permettent
de mettre en lumière l'accès au contenu sémantique du texte. A la
quantification 2, le texte est lisible pour un être humain, mais les lettres
semblent avoir de nombreuses petites imperfections. La photographie est très
altérée, car il est difficile de la reconstruire avec seulement 2 couleurs.
Néanmoins, la majorité du contenu est accessible (les écrans, les têtes de
J.M.M sur les écrans, l'estrade, seul l'orateur doit être deviné). A la
quantification 3, le texte est complètement net et lisible. La photographie
est mieux restituée avec trois couleurs, mais des interférences apparaissent
sur les écrans. La quantification 4 donne des résultats similaires à la
précédente avec en plus l'apparition de l'étiquette 0 qui vient manger une
partie de l'estrade et des écrans. Dans les quantifications suivantes,
l'étiquette 0 prend de plus en plus d'importance en grignotant d'abord la
photographie et ensuite le reste de l'article. D'autres détails apparaissent,
notemment les informations relatives à l'autre côté de la page scannée.
Apparition des bustes, des cadres des photos du verso.


Analyse des histogrammes de merge
---------------------------------

Nous utilisons les histogrammes h0_input.pgm, h5_merge_q2.ppm, h5_merge_q3.ppm,
h5_merge_q4.ppm, h5_merge_q5.ppm, h5_merge_q6.ppm, h5_merge_q7.ppm,
h5_merge_q8.ppm. Comparés à l'histogramme original, les histogrammes des
quantifications 2, 3, 4 préservent complètement l'information initiale. A partir
de la quantification 5, l'histogramme restitué perd de sa qualité, en 5 la
diagonale est préservée, mais les informations sous-diagonales tendent à
disparaître. De la quantification 6 à la quantification 8, la diagonale
s'estompent et de grosses occlusions apparaissent. A la quantification 8, seules
les extrémitées subsistent. Il faut mettre ces observations en rapport avec la
prédominance graduelle de l'étiquette 0 (plus cette étiquette est présente,
moins les couleurs passent).


Analyse des histogrammes de mean
--------------------------------

Nous nous concentrons, cette fois-ci, sur les images h5_mean_q2.ppm,
h5_mean_q3.ppm,h5_mean_q4.ppm, h5_mean_q5.ppm, h5_mean_q6.ppm,
h5_mean_q7.ppm, h5_mean_q8.ppm. Sur ces images nous pouvons voir la position
moyenne des étiquettes pour chacune des quantifications. A la quantification 2,
il existe deux couleurs, une nuance de noir et une nuance de blanc. A la
quantification 3, on introduit une nuance de rouge pour l'estrade, une nuance
de jaune pour pour la légende de la photographie, une nuance de bleue pour les
écrans et du gris pour certaine partie du texte. Le nombre restreint de couleur
permet de rendre uniforme le fond de l'article et de gommer les imperfections
dues aux informations résiduelle du verso de la page. A la quantification 4,
le nombre de couleurs disponibles double. Le fond de la photographie et le fond
de l'article restent homogènes, par contre le texte commence à acquérir
plusieurs nuances de couleurs (étiquettes 7 et 13). A la quantification 5, on
double encore le nombre de couleurs. Le fond de la photographie correspond
toujours à une nuance de noir homogène, mais maintenant le fond de l'article est
représenté par 3 nuances de blancs différentes. A partir de la quantification 6,
les couleurs qui occupaient la diagonale de manière régulière commencent à se
regrouper par paquets. De ce fait, on remarque une densification dans les
nuances de blancs. A la quantification 7 et 8, le phénomène s'amplifie et le
fond blanc de l'article se retrouve constellé en de nombreuses étiquettes
(bas à droite de l'histogramme).


Tentative de conclusion
-----------------------

Tout est dans la mesure. Une analyse avec une quantification trop restrictive
amène à commettre des erreurs car il faut choisir de représenter l'information
avec trop de peu de classes. Il existe un côté arbitraire de l'attribution des
couleurs qui ne dépend pas réellement du contenu sémantique mais beaucoup plus
de l'allure du signal d'origine. A contrario, ce n'est pas parce que nous
disposons d'une très grande palette de couleurs que ces dernières sont
utilisées à bon escient. Nous rentrons alors dans une description de
l'information avec un luxe de détail qui s'avère nuisible pour l'analyse
automatique de notre image. Le bon degré de description de l'image est une
palette pas trop restreinte, mais pas trop fournie non plus. Une quantification
3 ou 4 semblerait plus judicieuse à mon sens, dans la mesure où le fond blanc
de l'article demeure uniforme et uniclasse.
