Expérimentation de regmax sur mp00082c_50p.ppm
==============================================


Processus
---------

La chaine regmax se compose de la sorte:
1) Chargement de l'image initiale [image couleur 8 bits], appelée i0_input.
2) Quantification de i0_input en 5 ou 6 bits, résultat appelé i1_input.
3) Calcul de l'histogramme couleur (3d rgb) sur i1_input, appelé h1_input.
4) Filtrage morphologique (ouverture volumique) de h1_input, appelé h2_input.
5) Labelisation des maximaux regionnaux sur h2_input, résultat appelé l2_histo.

La suite correspond à différentes améliorations de l2_histo:
6a) Identité, l2_histo non modifié.
6b) Dilatation morphologique sur l2_histo, résultat appelé l3_histo.
6c) Influence géodésique complète sur l2_histo, résultat appelé l4_histo.
6d) Influence géodésique restreinte sur l2_histo, résultat appelé l5_histo.


Résultats
---------

1) Histogramme 8 bits couleur rgb (visu proj r/g) de i0_input, appelé h0_input.
2) Image initiale labelisée (version 6a, 6b, 6c et 6d), appelée lx_input.
3) Image des couleurs moyennes de chaque classe (toutes versions), ix_mean.
4) Image de transparence des couleurs (except label 0), appelé ix_merge.
5) Histogramme 8 bits couleur rgb (visu proj r/g) de ix_mean, appelé hx_mean.
6) Histogramme 8 bits couleur rgb (visu proj r/g) de ix_merge, appelé hx_merge.
7) Statistiques (étiquette, couleur moyenne, effectif, %image, %classés).

Les fichiers générés sont h0_input.pgm, l2_input.pgm, l3_input.pgm,
l4_input.pgm, l5_input.pgm, i2_mean.ppm, i3_mean.ppm, i4_mean.ppm, i5_mean.ppm,
i2_merge.ppm, i3_merge.ppm, i4_merge.ppm, i5_merge.ppm, h2_mean.pgm,
h3_mean.pgm, h4_mean.pgm, h5_mean.pgm, h2_merge.pgm, h3_merge.pgm,
h4_merge.pgm, h5_merge.pgm, s2_histo.txt, s3_histo.txt, s4_histo.txt et
s5_histo.txt.


Complément histogramme projeté
------------------------------

Etant incapable de visualiser correctement un histogramme couleur en 3
dimensions, nous convenons de projeter ce dernier suivant une des dimensions.
Nous choisissons la dimension bleue qui est corrélée avec la verte. La plus
grande partie de l'information est donc conservée sur le plan rouge/vert. La
visualisation des histogrammes 8 bits couleur rgb sur l'axe rouge/vert donne
lieu à des images de taille 256x256, l'axe vert en abscisse et l'axe rouge en
ordonnée. La lecture demande un peu de temps, il est possible de changer les
axes sous xv, en faisant tout d'abord une symétrie axiale verticale puis une
rotation anti-horaire (dans ce sens la lecture semble plus naturelle). Sur
l'image expérimentée, les couleurs moyennes des 30 étiquettes sont séparables
sur le plan rouge/vert, ce qui permet de bien les visualiser.


Analyse:
--------

Commençons l'analyse par le processus regmax lui même (l2_histo). Les
statistiques montrent qu'il existe 4 couleurs dominantes (étiquettes 27, 28, 29
et 30). Ces 4 étiquettes atteingnent des effectifs conséquents sur l'image,
autour de 11%, 7%, 7% et 10% alors que toutes les autres étiquettes sont
inférieures à 1%. L'étiquette 0, c'est à dire toutes les couleurs non classées,
représentent plus de 50% de l'image. La répartition des 4 couleurs dominantes
est la suivante, les étiquettes 27 et 30 sont comparables (+ de 20% des couleurs
classées), tout comme les étiquette 28 et 29 (autour de 16%).

Après une dilatation morphologique (l3_histo), les 4 couleurs prédominantes
restent les mêmes. Leur moyenne fluctue légèrement dans l'espace rgb. La
première constatation est que le nombre de couleurs non classés de l'histogramme
s'est écroulé; il passe de plus de 50% sur l2_histo à moins de 8% sur l3_histo.
Deuxième constatation, les effectifs de certaines classes passent en dessous de
1000 qui est le seuil choisi pour l'ouverture volumique. Troisième constatation,
alors que certaines classes regressent, d'autres au contraire progressent;
l'étiquette 30 a presque triplé son effectif, l'étiquette 29 a plus que doublé
le sien, l'étiquette 28 a regressé de presque la moitié et l'étiquette 27 est
restée stable. Une conclusion s'impose, la dilatation morphologique dilate
certaines classes au détriment de l'étiquette 0 et de certaines autres
étiquettes. Notemment parmi les 4 couleurs dominantes, l'étiquette 29 et 30 sont
les plus présentes (autour de 30% des couleurs classées), puis vient l'étiquette
27 (autour de 15%) et enfin l'étiquette 28 qui se retrouve minoritaire
(moins de 5%).

La transformation par influence géodésique présente l'avantage de ne pas écraser
les étiquettes présentes par d'autres. Les différentes classes s'étendent
uniquement au détriment de l'étiquette 0 (les couleurs non classées). Nous
remarquons qu'il existe toujours 4 couleurs dominantes (les mêmes au dessus de
10%), toutes les autres sont en dessous de 3% du nombre total de couleur dans
l'image. L'étiquette 29 représente un peu plus de 20% des couleurs, puis
viennent les étiquettes 28 et 30 (autour de 17%) et enfin l'étiquette 26 proche
de 12%.

La version restreinte de la transformation par influence morphologique laisse
moins de 4% de couleur non classés. L'ordre et l'importance des 4 couleurs
dominantes ne change peu par rapport à la transformation complète.


Interprétation des classes dominantes
-------------------------------------

L'étiquette 28, 29 et 30 sont des nuances de blanc. L'étiquette 27 est une
nuance de noir. Prenons les images l2_input.pgm, l3_input.pgm, l4_input.pgm et
l5_input.pgm. Remplaçons les numéros d'étiquettes par des fausses couleurs.
Prenons par exemple le jaune pour l'étiquette 27, le rouge pour l'étiquette 28,
le vert pour l'étiquette 29 et le bleu pour l'étiquette 30. Nous pouvons
maintenant mieux appréhender ce que représentent ces 4 couleurs dominantes.

L'image représente un article de journal scanné. L'article est organisé en trois
colonnes et contient une photo montage au centre des deux premières colonnes.
Du texte apparaît au dessus et au dessous de cette photo représentant J.M.M. en
conférence probablement devant ses actionnaires. Des informations provenant de
l'autre côté de la page, notemment des bustes de personnes apparaissent en bas
de la page.

L'étiquette 27 représente le fond noir de la photo, tandis que les étiquettes
28, 29 et 30 représentent le blanc de l'article. Ce sont les étiquettes 28 et 29
qui sont porteuses entre autre de l'information provenant de l'autre côté de la
page. Par rapport à la référence l2_input.pgm, nous voyons que l'effet de la
dilatation morphologique qui évince la classe 29 au profit de la classe 30. Les
bustes issus de l'autre côté de la page ne sont plus représentés que presque
par une seule classe (étiquette 29). Au contraire, nous voyons comment
cette information est préservée par la transformation par influence géodésique.


Interprétation des images de transparence des couleurs (excepté étiquette 0):
-----------------------------------------------------------------------------

Prenons les images i2_merge.ppm, i3_merge.ppm, i4_merge.ppm, i5_merge.ppm. La
formation de ces images est telle que les couleurs de l'image d'origine sont
gardées telles qu'elles sauf pour celles associées à l'étiquette 0. Ces images
nous montrent exclusivement où se situent les couleurs non classées. Dans
l'image i2_merge.ppm, les couleurs non classés sont présentent un peu partout
dans l'article, avec trois fortes concentrations, une en haut de page venant
brouiller les titres, une en plein milieu de la photo sur les écrans de la salle
de conférence ainsi que l'estrade, et une dernière en bas de la page faisant
ressortir en inverse vidéo les bustes appartenant à l'autre côté de la page. En
utilisant la dilatation morphologique (i3_merge.ppm), les couleurs non classés
se retrouvent principalement sur le titre de l'article et partiellement sur les
écrans présents dans la photo. Sur les écrans apparaissent par inverse vidéo le
buste de J.M.M.. La transformée par influence géodésique n'a plus de classe
d'étiquette 0 (couleurs non classées). De ce fait, l'image obtenue est l'image
originale. La transformée restreinte contient quelques couleurs non classés qui
sont concentrés exclusivement sur la photo (l'estrade et les écrans). Ces images
montrent comment l'accroissement des classes d'étiquettes initiales permet de
réduire de manière très importante le nombre de couleurs non classées.


Interprétation des images de couleurs moyennes des étiquettes:
--------------------------------------------------------------

Nous nous intéressons maintenant aux images i2_mean.ppm, i3_mean.ppm,
i4_mean.ppm et i5_mean.ppm. Ces images sont formées en replaçant chaque
étiquette par sa couleur moyenne dans l'image. Une exception est faite pour la
classe des couleurs non classées qui apparaissent en jaune (car la classe est
foncièrement non homogène). Nous obtenons alors une image reconstruite. Ces
images insistent sur la position des couleurs non classés et leur influence sur
la lisibilité du texte de l'article ainsi reconstruit. La première image
i2_mean.ppm montre une prédominance importante de l'étiquette 0. Cette dernière
rend le texte non lisible pour la majorité des mots de l'article (on reconnaît
qu'il y a du texte, mais on n'accède pas au sens). La dilatation morpholoique
améliore grandement le rendu final. Tout le texte de la première colonne est
lisible, le texte de la seconde colonne et de la troisième connaît
d'importantes altérations qui nuit au déchiffrage de nombreuses lettres et par
conséquent des mots. Il est à noter que le titre de l'article est lui aussi très
altéré, ainsi que la légende de la photo. L'image i4_mean.ppm montre un article
complètement lisible, les couleurs non classées étant inexistantes. Enfin, la
transformation par influence géodésique restreinte produit un résultat très
encourageant. L'ensemble du texte est peu altéré, certains mots seront
difficiles à identifier. Le titre de l'article est complètement lisible,
toutefois la légende de l'image demeure incompréhensible. Une conclusion
s'impose, la technique regmax permet de comprimer l'image de cet article avec
seulement 30 couleurs et permet de reconstruire l'information lisiblement.


Interprétation des histogrammes des images ix_merge.ppm
-------------------------------------------------------

Les histogrammes concernés sont les projections sur le plan rouge/vert
h0_input.pgm (histogramme de l'image originale), h2_merge.pgm, h3_merge.pgm,
h4_merge.pgm et h5_merge.pgm. L'histogramme projeté de l'image originale montre
des couleurs fortement réparties en diagonale avec un peu d'information en
dessous de cette diagonale. Sur h2_merge, on reconnaît une ébauche de la
diagonale avec très peu d'information en dessous de celle-ci. La dilatation
morphologique (h3_merge) permet de reconstruire tout l'histogramme. Néanmoins,
des trous apparaissent vis à vis du motif initial. La transformée par influence
géodésique laissant passer toutes les couleurs reproduit exactement
l'histogramme initial. Enfin, la transformée par influence géodésique restreinte
montre une assez bonne reconstruction où les zones denses de l'histogramme sont
reproduites à l'identique et où les zones peu denses sont absentes.


Interprétation des histogrammes des images ix_mean.ppm
------------------------------------------------------

Les histogrammes h2_mean.pgm, h3_mean.pgm, h4_mean.pgm et h5_mean.pgm
représentent les couleurs moyennes projetées des étiquettes sur le plan
rouge/vert. Chaque étiquette est est perçue comme un point dans cette
représentation. Nous percevons aisément que sur la diagonale, les étiquettes
peuvent posséder des couleurs proches entre elles, expliquant facilement les
résultats de la dilatation morphologique relatif aux écrasements de classes. On
perçoit mieux la compression en terme de couleurs que cela peut représenter si
on compare ces images vis-à-vis de l'histogramme original (h0_input.pgm). Les 4
couleurs dominantes se situent aux extrémités de la diagonale, le noir tout
en haut à gauche, et les trois blancs tout en bas à droite.


Conclusion
----------

La première conclusion que l'on peut donner sur la technique au vu de son
application sur cette image est la formidable compression d'information qu'elle
permet d'effectuer. On obtient des résultats tout à fait convaincant pour
reconstruire l'image avec seulement une trentaine de couleurs. Le texte est
complètement lisible avec la transformation par influence géodésique complète.

La seconde conclusion concerne l'extraction des quatres couleurs dominantes qui
constituent le fond de l'image. Les trois blancs forment les trois couleurs du
fond de l'article, et le noir le fond de la photo.

La troisième conclusion concerne l'importance des couleurs non classées qui
viennent perturber la lisibilité du texte lors de la reconstruction en occultant
des petites parties sur un certain nombre de lettres.
