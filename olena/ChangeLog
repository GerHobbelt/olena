2006-10-09  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Change stc_virtual_typedef into oln_virtual_typedef.
	
	* oln/core/macros.hh (oln_virtual_typedef): New macro.
	It replaces stc_virtual_typedef.
	* oln/core/abstract/image.hh: Update.
	* oln/core/abstract/image/mutability/hierarchy.hh: Update.
	* oln/core/abstract/image/neighborhood/hierarchy.hh: Update.
	* oln/core/abstract/image/bbox/hierarchy.hh: Update.
	* oln/core/abstract/point_set.hh: Update.
	* oln/core/abstract/neighborhood.hh: Update.
	* oln/core/abstract/topology.hh: Update.

2006-10-09  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	* oln/debug/print.hh: Separate definition from declaration.
	* oln/core/automatic/topology_being_random_accessible.hh
	(impl_has_large): Fix signature.

2006-10-09  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Separate definition code from declaration code in olena.

	* oln/core/type.hh: Split code.
	* oln/core/point_set_entry.hh: Likewise.
	* oln/core/automatic/image.hh: Likewise.
	* oln/core/automatic/topology_having_bbox.hh: Likewise.
	* oln/core/automatic/image_being_random_accessible.hh: Likewise.
	* oln/core/automatic/image_having_neighborhood.hh: Likewise.
	* oln/core/automatic/topology_being_random_accessible.hh: Likewise.
	* oln/core/automatic/topology_having_subset.hh: Likewise.
	* oln/core/automatic/image_being_mutable.hh: Likewise.
	* oln/core/automatic/topology_having_neighborhood.hh: Likewise.
	* oln/core/neighborhood_entry.hh: Likewise.
	* oln/core/topology_entry.hh: Likewise.
	* oln/core/image_entry.hh: Likewise.
	* oln/core/abstract/iterator_on_points.hh: Likewise.
	* oln/core/abstract/topology_having_bbox.hh: Likewise.
	* oln/core/abstract/image.hh: Likewise.
	* oln/core/abstract/image/type/binary.hh: Likewise.
	* oln/core/abstract/image/type/data.hh: Likewise.
	* oln/core/abstract/image/type/grey_level.hh: Likewise.
	* oln/core/abstract/image/type/color.hh: Likewise.
	* oln/core/abstract/image/type/label.hh: Likewise.
	* oln/core/abstract/image/hybrid/classical.hh: Likewise.
	* oln/core/abstract/image/mutability/hierarchy.hh: Likewise.
	* oln/core/abstract/image/dimension/2d.hh: Likewise.
	* oln/core/abstract/image/neighborhood/hierarchy.hh: Likewise.
	* oln/core/abstract/image/accessibility/hierarchy.hh: Likewise.
	* oln/core/abstract/image/bbox/hierarchy.hh: Likewise.
	* oln/core/abstract/point_set_being_random_accessible.hh: Likewise.
	* oln/core/abstract/grid.hh: Likewise.
	* oln/core/abstract/iterator.hh: Likewise.
	* oln/core/abstract/point.hh: Likewise.
	* oln/core/abstract/bbox.hh: Likewise.
	* oln/core/abstract/point_set_being_connected.hh: Likewise.
	* oln/core/abstract/dpoint.hh: Likewise.
	* oln/core/abstract/topology_being_random_accessible.hh: Likewise.
	* oln/core/abstract/topology_having_subset.hh: Likewise.
	* oln/core/abstract/topology_having_neighborhood.hh: Likewise.
	* oln/core/abstract/entry.hh: Likewise.
	* oln/core/abstract/point_set.hh: Likewise.
	* oln/core/abstract/point_set_having_known_size.hh: Likewise.
	* oln/core/abstract/neighborhood.hh: Likewise.
	* oln/core/abstract/point_set_having_bbox.hh: Likewise.
	* oln/core/abstract/topology.hh: Likewise.
	* oln/core/2d/neighb2d.hh: Likewise.
	* oln/core/2d/dpoint2d.hh: Likewise.
	* oln/core/2d/array2d.hh: Likewise.
	* oln/core/2d/image2d.hh: Likewise.
	* oln/core/2d/point2d.hh: Likewise.
	* oln/core/gen/piter_isubset.hh: Likewise.
	* oln/core/gen/topo_add_isubset.hh: Likewise.
	* oln/core/gen/bbox.hh: Likewise.
	* oln/core/gen/topo_bbox.hh: Likewise.
	* oln/core/gen/neighb.hh: Likewise.
	* oln/core/gen/fwd_piter_bbox.hh: Likewise.
	* oln/core/gen/bbox_fwd_piter.hh: Likewise.
	* oln/core/gen/fwd_niter_neighb.hh: Likewise.
	* oln/core/gen/fwd_qiter_win.hh: Likewise.
	* oln/core/gen/topo_lbbox.hh: Likewise.
	* oln/core/gen/window.hh: Likewise.
	* oln/core/gen/bbox_bkd_piter.hh: Likewise.
	* oln/core/gen/bkd_piter_bbox.hh: Likewise.
	* oln/core/gen/topo_add_nbh.hh: Likewise.
	* oln/core/gen/mapimage.hh: Likewise.
	* oln/core/internal/tracked_ptr.hh: Likewise.
	* oln/core/internal/topology_morpher.hh: Likewise.
	* oln/core/internal/point_nd.hh: Likewise.
	* oln/core/internal/bbox_bkd_piter.hh: Likewise.
	* oln/core/internal/bbox_fwd_piter.hh: Likewise.
	* oln/core/internal/dpoint_nd.hh: Likewise.
	* oln/basics2d.hh: Likewise.
	* oln/morpher/add_isubset.hh: Likewise.
	* oln/morpher/identity.hh: Likewise.
	* oln/morpher/internal/image_extension.hh: Likewise.
	* oln/morpher/add_neighborhood.hh: Likewise.

2006-10-05  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Decouple iterators from image topology; update neighborhood tools
	and start to add window tools.
	
	* oln/core/automatic/topology_having_subset.hh: New.
	* oln/core/abstract/topology_having_subset.hh: New.
	* oln/core/gen/fwd_niter_neighb.hh: New.
	* oln/core/gen/fwd_qiter_win.hh: New.
	* oln/core/gen/window.hh: New.
	* oln/core/typedefs.hh
	(qiter_type, fwd_qiter_type, bkd_qiter_type): Uncomment.
	(niter_type, fwd_niter_type, bkd_niter_type): Uncomment.
	(isubset): Rename into...
	(subset_type): ...this.
	* oln/core/macros.hh
	(oln_type_of, oln_deduce_type_of, oln_type_of_): Rely on direct access.
	(oln_check_type_of, oln_check_type_of_): Rely on direct access.
	(oln_deduce_direct_type_of): New.
	* oln/core/topology_entry.hh (subset_type): New.
	* oln/core/image_entry.hh (fwd_piter_type, bkd_piter_type): Move
	from vtypes to single_vtype.
	(fwd_qiter_type): New.
	* oln/core/abstract/topology_hierarchies.hh
	(topology_hierarchy_wrt_subset): New.
	(include): Add topology_having_subset.hh.
	* oln/core/abstract/image/neighborhood/hierarchy.hh
	(niter, fwd_niter, bkd_niter): New in decl.
	* oln/core/2d/aliases.hh
	(fwd_piter_bbox_, bkd_piter_bbox_): Change param letter.
	(fwd_piter2d, bkd_piter2d): Update.
	* oln/core/2d/neighb2d.hh (c4, c8, c2_row, c2_col): Rename into...
	(mk_c4, mk_c8, mk_c2_row, mk_c2_col): ...these in namespace internal.
	(c4, c8, c2r, c2c): New objects.
	* oln/core/gen/piter_isubset.hh (piter_isubset_): New ctor for
	iterators around a point.
	(topo): Return a copy.
	(change_topology_): Remove; obsolete.
	* oln/core/gen/topo_add_isubset.hh (isubset_type): Rename into...
	(subset_type): ...this.
	(isubset): Rename into...
	(impl_subset): ...this.
	* oln/core/gen/topo_bbox.hh (impl_lbbox): New; experimental!
	* oln/core/gen/fwd_piter_bbox.hh (fwd_piter_bbox_): Change parameter
	from topo to point; update.
	(topo): Remove this method; obsolete.
	(change_topology_): Remove; obsolete.
	(topo_): Remove this attribute; obsolete.
	* oln/core/gen/bkd_piter_bbox.hh: Likewise.
	* oln/basics2d.hh: Update.
	* oln/Makefile.am (nobase_oln_HEADERS): Update.
	* oln/core/2d/image2d.hh
	(fwd_piter_type, bkd_piter_type): Move these definitions into...
	* oln/core/fwd_piter.hh: ... this new file.
	* oln/morpher/add_isubset.hh: Likewise.
	* oln/morpher/add_neighborhood.hh: Likewise.
	* oln/morpher/internal/image_extension.hh (image_): Change from
	const& to plain type.

2006-10-03  Roland Levillain  <roland@lrde.epita.fr>

	Fix the distribution.

	* oln/Makefile.am (nobase_oln_HEADERS): Add core/1d/aliases.hh,
	core/1d/array1d.hh, core/1d/dpoint1d.hh, core/1d/image1d.hh,
	core/1d/neighb1d.hh, core/1d/point1d.hh, core/3d/aliases.hh,
	core/3d/array3d.hh, core/3d/dpoint3d.hh, core/3d/image3d.hh,
	core/3d/neighb3d.hh, core/3d/point3d.hh,
	core/internal/tracked_ptr.hh, basics1d.hh, basics3d.hh.

2006-10-03  Roland Levillain  <roland@lrde.epita.fr>

	Add oln::image3d and associated types.

	* oln/core/3d/image3d.hh, oln/core/3d/array3d.hh,
	* oln/core/3d/point3d.hh, oln/core/3d/dpoint3d.hh,
	* oln/core/3d/neighb3d.hh, oln/core/3d/aliases.hh,
	* oln/basics3d.hh: New.
	* oln/core/abstract/point_set_being_connected.hh
	(oln::abstract::point_set_being_3d_connected): New class.
	(oln::case_<point_set_hierarchy_wrt_connectivity, E, 3>): New
	case.
	* tests/image3d.cc: New test.
	* tests/Makefile.am (check_PROGRAMS): Add image3d.
	(image3d_SOURCES): New.

2006-10-03  Roland Levillain  <roland@lrde.epita.fr>

	Add oln::image1d and associated types.

	* oln/core/1d/image1d.hh, oln/core/1d/array1d.hh,
	* oln/core/1d/point1d.hh, oln/core/1d/dpoint1d.hh,
	* oln/core/1d/neighb1d.hh, oln/core/1d/aliases.hh,
	* oln/basics1d.hh: New.
	* oln/core/abstract/point_set_being_connected.hh
	(oln::abstract::point_set_being_1d_connected): New class.
	(oln::case_<point_set_hierarchy_wrt_connectivity, E, 1>): Handle
	the 1-dimension case, and move the 2-dimension case...
	(oln::case_<point_set_hierarchy_wrt_connectivity, E, 2>): ...here
	(new).
	* tests/image1d.cc: New test.
	* tests/Makefile.am (check_PROGRAMS): Add image1d.
	(image1d_SOURCES): New.

2006-10-03  Roland Levillain  <roland@lrde.epita.fr>

	Clean up morphers.

	* oln/morpher/identity.hh
	(oln::vtypes< morpher::identity<Image> >): Remove (was useless).
	(oln/morpher/tags.hh): Move header inclusion...
	* oln/morpher/internal/image_extension.hh: ...here
	* oln/morpher/add_neighborhood.hh, oln/morpher/add_isubset.hh
	(oln/morpher/tags.hh): No longer include it.
	* oln/morpher/tags.hh (oln::morpher::tag::add_neighborhood):
	Remove (was useless).
	(oln::morpher::tag::identity): Adjust documentation.

2006-10-03  Roland Levillain  <roland@lrde.epita.fr>

	Take borders into account in data allocation of image2d.

	* oln/core/2d/image2d.hh (image2d(unsigned, unsigned, unsigned)):
	Allocate space for the border in the array.
	* oln/core/2d/point2d.hh, oln/core/typedefs.hh: Add FIXMEs.
	* oln/core/2d/neighb2d.hh, oln/core/2d/dpoint2d.hh,
	* oln/core/internal/point_nd.hh: Aesthetic changes.

2006-10-02  Roland Levillain  <roland@lrde.epita.fr>

	Add simple tests for point2d and dpoint2d.

	* tests/dpoint2d.cc, tests/point2d.cc: New tests.
	* tests/image_entry.cc: Fix comments.
	* tests/Makefile.am (check_PROGRAMS): Add dpoint2d and point2d.
	(dpoint2d_SOURCES, point2d_SOURCES): New.

2006-10-02  Roland Levillain  <roland@lrde.epita.fr>

	Separate tracked_ptr from array2d.

	* oln/core/2d/array2d.hh (oln::tracked_ptr): Move...
	* oln/core/internal/tracked_ptr.hh: ...here (new file).
	* oln/core/2d/image2d.hh (oln::image2d::data_): Adjust type.
	(oln::image2d(const topo2d&)): New ctor.
	* tests/image2d.cc: New test.
	* tests/Makefile.am (check_PROGRAMS): Add image2d.
	(image2d_SOURCES): New.

2006-10-02  Roland Levillain  <roland@lrde.epita.fr>

	Fix the inheritance of oln::point2d_ and oln::dpoint2d_.

	* oln/core/2d/point2d.hh (oln::set_super_type< point2d_<C> >):
	New.
	(oln::point2d_): Use stc_get_supers to set the base class.
	(oln::point2d_::super_t): Use stc_get_super to define it.
	(oln::point2d_::point2d_(coord_t, coord_t)): Use xtd::mk_vec
	to initialize the base class.
	* oln/core/2d/dpoint2d.hh (oln::set_super_type< dpoint2d_<C> >):
	Re-enable it.
	(oln::dpoint2d_): Use stc_get_supers to set the base class.
	(oln::dpoint2d_::super_t): Use stc_get_super to define it.

2006-10-02  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Add isubset image morpher and subsequent tools.
	
	* oln/core/gen/piter_isubset.hh: New.
	* oln/core/gen/topo_add_isubset.hh: New.
	* oln/morpher/add_isubset.hh: New.
	* oln/debug/print.hh (println): New.
	* oln/core/typedefs.hh (isubset): New.
	* oln/core/automatic/image_being_random_accessible.hh
	(set_impl): Remove; cause error-prone.
	* oln/core/abstract/image/type/hierarchy.hh
	(where_): Rely on xtd_is_binary instead of an hard-coded test. 
	(include): Update.
	* oln/core/gen/fwd_piter_bbox.hh (topo_type): new.
	(topo_): Change ref into plain type so it is more secure.
	* oln/core/gen/bkd_piter_bbox.hh (topo_type): new.
	(topo_): Change ref into plain type so it is more secure.
	* oln/core/gen/topo_add_nbh.hh (operator topo_t): New.
	* oln/core/internal/topology_morpher.hh
	(delegated_type): New.

2006-09-29  Roland Levillain  <roland@lrde.epita.fr>

	Use TESTS_CXXFLAGS in Olena.

	* tests/Makefile.am (TESTS_CXXFLAGS): New.
	Append it to...
	(CXXFLAGS): ...this variable.
	* tests/fill.cc: Typo in comment.

2006-09-28  Roland Levillain  <roland@lrde.epita.fr>

	Add oln::level::fill().

	* oln/level/fill.hh: New.
	* oln/Makefile.am (nobase_oln_HEADERS): Add level/fill.hh.
	* tests/fill.cc: New test.
	* tests/Makefile.am (AM_CXXFLAGS): Rename as...
	(CXXFLAGS): ...this.
	(check_PROGRAMS): Add fill.
	(fill_SOURCES): New.

2006-09-28  Roland Levillain  <roland@lrde.epita.fr>

	Catch up with Static's changes on automatically retrieved
	implementations.

	* oln/core/automatic/impl.hh: New.
	* oln/automatic/image.hh: Move...
	* oln/core/automatic/image.hh: ...here.
	(impl): Rename as...
	(set_impl): ...this.
	* oln/automatic/image_being_mutable.hh: Move...
	* oln/core/automatic/image_being_mutable.hh: ...here.
	(impl): Rename as...
	(set_impl): ...this.
	* oln/automatic/image_being_random_accessible.hh: Move...
	* oln/core/automatic/image_being_random_accessible.hh: ...here.
	(impl): Rename as...
	(set_impl): ...this.
	* oln/automatic/image_having_neighborhood.hh: Move...
	* oln/core/automatic/image_having_neighborhood.hh: ...here.
	(impl): Rename as...
	(set_impl): ...this.
	* oln/automatic/topology_being_random_accessible.hh: Move...
	* oln/core/automatic/topology_being_random_accessible.hh: ...here.
	(impl): Rename as...
	(set_impl): ...this.
	* oln/automatic/topology_having_bbox.hh: Move...
	* oln/core/automatic/topology_having_bbox.hh: ...here.
	(impl): Rename as...
	(set_impl): ...this.
	* oln/automatic/topology_having_neighborhood.hh: Move...
	* oln/core/automatic/topology_having_neighborhood.hh: ...here.
	(impl): Rename as...
	(set_impl): ...this.
	Adjust.
	* oln/core/abstract/image.hh (oln::abstract::image)
	* oln/core/abstract/image/accessibility/hierarchy.hh
	(oln::abstract::image_being_random_accessible)
	* oln/core/abstract/image/bbox/hierarchy.hh
	(oln::abstract::image_having_bbox)
	* oln/core/abstract/image/dimension/1d.hh
	(oln::abstract::image1d)
	* oln/core/abstract/image/dimension/2d.hh
	(oln::abstract::image2d)
	* oln/core/abstract/image/dimension/3d.hh
	(oln::abstract::image3d)
	* oln/core/abstract/image/mutability/hierarchy.hh
	(oln::abstract::image_being_mutable)
	* oln/core/abstract/image/neighborhood/hierarchy.hh
	(oln::abstract::image_having_neighborhood)
	* oln/core/abstract/topology_being_random_accessible.hh
	(oln::abstract::topology_being_random_accessible)
	* oln/core/abstract/topology_having_bbox.hh
	(oln::abstract::topology_having_bbox)
	* oln/core/abstract/topology_having_neighborhood.hh
	(oln::abstract::topology_having_neighborhood): Adjust.
	* oln/Makefile.am (nobase_oln_HEADERS): Adjust.

2006-09-27  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Add oln debug print and a "classical" image abstraction.
	
	* oln/debug/print.hh: New.
	* oln/core/abstract/image/hybrid/classical.hh: New.
	* oln/core/abstract/image/hierarchies.hh
	(image_hybrid_hierarchy_wrt_classical): New.
	(include): Update.
	* oln/Makefile.am (nobase_oln_HEADERS): Update.
	
2006-09-27  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Update grid classes and add static checks for image vtypes.
	
	* oln/core/abstract/fwd_decls.hh: New.
	* tests/image_entry.cc: Update.
	* oln/core/abstract/image.hh (include): Add fwd_decls.
	(decl): Add static checks.
	* oln/core/abstract/image/mutability/hierarchy.hh
	(lvalue_t, psite_t): Update.  oln_check_type_of is now useless
	cause vtypes are now automatically checked in the decl structure.
	* oln/core/abstract/image/bbox/hierarchy.hh
	(bbox_t, point_t): Likewise.
	(decl): Add static checks.
	* oln/core/abstract/grid.hh (include): Update.
	(point_type, dpoint_type, size_type, coord_type): Remove.
	We have point->grid, not the contrary.
	(grid): Change inheritance to stc::any__simple.
	* oln/core/1d/grid1d.hh: Update.
	* oln/core/2d/grid2d.hh: Update.
	* oln/core/3d/grid3d.hh: Update.
	* oln/basics2d.hh (include): Add grid2d.
	* oln/Makefile.am (nobase_oln_HEADERS): Update.

2006-09-27  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Adjust guards to directory names.
	
	* oln/automatic/topology_having_bbox.hh: Adjust guard to directory
	name.
	* oln/automatic/image.hh: Likewise.
	* oln/automatic/image_being_random_accessible.hh: Likewise.
	* oln/automatic/image_having_neighborhood.hh: Likewise.
	* oln/automatic/topology_being_random_accessible.hh: Likewise.
	* oln/automatic/topology_having_neighborhood.hh: Likewise.
	* oln/automatic/image_being_mutable.hh: Likewise.
	* oln/core/type.hh: Likewise.
	* oln/core/traits_id.hh: Likewise.
	* oln/core/typedefs.hh: Likewise.
	* oln/core/macros.hh: Likewise.
	* oln/core/point_set_entry.hh: Likewise.
	* oln/core/neighborhood_entry.hh: Likewise.
	* oln/core/topology_entry.hh: Likewise.
	* oln/core/image_entry.hh: Likewise.
	* oln/core/abstract/iterator_on_points.hh: Likewise.
	* oln/core/abstract/image.hh: Likewise.
	* oln/core/abstract/topology_hierarchies.hh: Likewise.
	* oln/core/abstract/topology_having_bbox.hh: Likewise.
	* oln/core/abstract/image/type/binary.hh: Likewise.
	* oln/core/abstract/image/type/data.hh: Likewise.
	* oln/core/abstract/image/type/integre.hh: Likewise.
	* oln/core/abstract/image/type/grey_level.hh: Likewise.
	* oln/core/abstract/image/type/hierarchy.hh: Likewise.
	* oln/core/abstract/image/type/color.hh: Likewise.
	* oln/core/abstract/image/type/label.hh: Likewise.
	* oln/core/abstract/image/mutability/hierarchy.hh: Likewise.
	* oln/core/abstract/image/hierarchies.hh: Likewise.
	* oln/core/abstract/image/dimension/1d.hh: Likewise.
	* oln/core/abstract/image/dimension/2d.hh: Likewise.
	* oln/core/abstract/image/dimension/3d.hh: Likewise.
	* oln/core/abstract/image/dimension/hierarchy.hh: Likewise.
	* oln/core/abstract/image/neighborhood/hierarchy.hh: Likewise.
	* oln/core/abstract/image/accessibility/hierarchy.hh: Likewise.
	* oln/core/abstract/image/bbox/hierarchy.hh: Likewise.
	* oln/core/abstract/grid.hh: Likewise.
	* oln/core/abstract/point_set_being_random_accessible.hh: Likewise.
	* oln/core/abstract/any.hh: Likewise.
	* oln/core/abstract/point.hh: Likewise.
	* oln/core/abstract/iterator.hh: Likewise.
	* oln/core/abstract/point_set_being_connected.hh: Likewise.
	* oln/core/abstract/bbox.hh: Likewise.
	* oln/core/abstract/topology_being_random_accessible.hh: Likewise.
	* oln/core/abstract/dpoint.hh: Likewise.
	* oln/core/abstract/topology_having_neighborhood.hh: Likewise.
	* oln/core/abstract/entry.hh: Likewise.
	* oln/core/abstract/point_set.hh: Likewise.
	* oln/core/abstract/point_set_having_known_size.hh: Likewise.
	* oln/core/abstract/neighborhood.hh: Likewise.
	* oln/core/abstract/point_set_having_bbox.hh: Likewise.
	* oln/core/abstract/point_set_hierarchies.hh: Likewise.
	* oln/core/abstract/topology.hh: Likewise.
	* oln/core/abstract/internal/image_impl.hh: Likewise.
	* oln/core/1d/grid1d.hh: Likewise.
	* oln/core/traits.hh: Likewise.
	* oln/core/2d/aliases.hh: Likewise.
	* oln/core/2d/neighb2d.hh: Likewise.
	* oln/core/2d/dpoint2d.hh: Likewise.
	* oln/core/2d/array2d.hh: Likewise.
	* oln/core/2d/image2d.hh: Likewise.
	* oln/core/2d/grid2d.hh: Likewise.
	* oln/core/2d/point2d.hh: Likewise.
	* oln/core/3d/grid3d.hh: Likewise.
	* oln/core/case.hh: Likewise.
	* oln/core/gen/topo_lbbox.hh: Likewise.
	* oln/core/gen/bbox.hh: Likewise.
	* oln/core/gen/topo_bbox.hh: Likewise.
	* oln/core/gen/neighb.hh: Likewise.
	* oln/core/gen/fwd_piter_bbox.hh: Likewise.
	* oln/core/gen/bbox_fwd_piter.hh: Likewise.
	* oln/core/gen/bbox_bkd_piter.hh: Likewise.
	* oln/core/gen/bkd_piter_bbox.hh: Likewise.
	* oln/core/gen/topo_add_nbh.hh: Likewise.
	* oln/core/gen/mapimage.hh: Likewise.
	* oln/core/internal/topology_morpher.hh: Likewise.
	* oln/core/internal/point_nd.hh: Likewise.
	* oln/core/internal/bbox_bkd_piter.hh: Likewise.
	* oln/core/internal/bbox_fwd_piter.hh: Likewise.
	* oln/core/internal/dpoint_nd.hh: Likewise.
	* oln/basics2d.hh: Likewise.
	* oln/morpher/identity.hh: Likewise.
	* oln/morpher/internal/image_extension.hh: Likewise.
	* oln/morpher/tags.hh: Likewise.
	* oln/morpher/add_neighborhood.hh: Likewise.

2006-09-27  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Add array2d and tracked_ptr.
	
	* oln/core/2d/array2d.hh: New.
	This file also provides the tracked_ptr class which should be
	moved later in a more appropriate file.
	* oln/core/2d/image2d.hh (lvalue_type, is_mutable_type): Add.
	(data_): New attribute.
	(impl_op_read): Update; code is no more fake.
	(impl_op_readwrite): New.
	(image2d): Update.
	* oln/Makefile.am (nobase_oln_HEADERS): Update; remove
	the core/2d/grid2d.hh duplicate.

2006-09-27  Roland Levillain  <roland@lrde.epita.fr>

	* tests/Makefile.am (AM_CXXFLAGS): Set to -O0 -ggdb.

2006-09-26  Roland Levillain  <roland@lrde.epita.fr>

	Let neighborhood() return a const reference instead of a copy.

	* oln/automatic/image_having_neighborhood.hh (impl_neighborhood)
	* oln/core/abstract/image/neighborhood/hierarchy.hh
	(image_having_neighborhood::neighborhood): Return a const
	reference instead of a copy.

2006-09-26  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Add mapimage type and update.
	
	* oln/core/gen/mapimage.hh: New.
	* oln/automatic/image_being_random_accessible.hh: New.
	* oln/core/abstract/topology_having_bbox.hh
	(bbox): New; mutable version.
	* oln/core/abstract/image.hh (has): Remove; this method
	is now specific to a sub-abstraction.
	* oln/core/abstract/image/mutability/hierarchy.hh
	(lvalue_t, psite_t): Update.
	(~image_being_mutable): Fix typo.
	(using): New; it allows disambiguation of overloading
	thru inheritance.
	* oln/core/abstract/image/accessibility/hierarchy.hh
	(has, has_large): Update.
	(include): Update.
	* oln/core/abstract/image/bbox/hierarchy.hh
	(bbox_t, point_t): Update.
	(bbox): Change return signature.
	(pmin, pmax): New.
	* oln/core/gen/topo_bbox.hh (impl_bbox): New.
	* oln/Makefile.am (nobase_oln_HEADERS): Update.
	
2006-09-26  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Add some abstract image sub-hierarchies.
	
	* oln/automatic/image_being_mutable.hh: New.
	* oln/core/abstract/image/mutability/hierarchy.hh: New.
	* oln/core/abstract/image/accessibility/hierarchy.hh: New.
	* oln/core/abstract/image/bbox/hierarchy.hh: New.
	* oln/core/typedefs.hh (lvalue_type, is_mutable_type): New.
	* oln/core/macros.hh (oln_deduce_type_of): New.
	* oln/core/abstract/image.hh: Cosmetics.
	* oln/core/abstract/image/hierarchies.hh
	(image_hierarchy_wrt_bbox): New.
	(image_hierarchy_wrt_accessibility): New.
	(image_hierarchy_wrt_mutability): New.
	(include): Update.	
	* oln/core/abstract/image/neighborhood/hierarchy.hh (decl): New.
	(~image_having_neighborhood): New.

2006-09-26  Roland Levillain  <roland@lrde.epita.fr>

	* oln/core/typedefs.hh: Catch up with changes in Static's
	stc/scoop.hh.

2006-09-26  Roland Levillain  <roland@lrde.epita.fr>

	Catch up with changes in the image abstractions hierachies.

	* tests/identity_morpher.cc, tests/add_neighborhood_morpher.cc,
	* tests/morphers.cc: Catch up with changes in the image
	abstractions hierachies.

2006-09-26  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Dispatch image abstract classes into subdirs and files.
	
	* oln/core/abstract/image/type: New directory.
	* oln/core/abstract/image/dimension: New directory.
	* oln/core/abstract/image/neighborhood: New directory.
	* oln/core/abstract/image_type.hh (internal): Remove.
	Rename into...
	* oln/core/abstract/image/type/hierarchy.hh: ...this file.
	* oln/core/abstract/image_dimension.hh: Rename into...
	* oln/core/abstract/image/dimension/hierarchy.hh: ...this file.
	* oln/core/abstract/image_hierarchies.hh: Rename into...
	* oln/core/abstract/image/hierarchies.hh: ...this file.
	* oln/core/abstract/image_type_integre.hh: Rename into...
	* oln/core/abstract/image/type/integre.hh: ...this file.
	* oln/core/abstract/image_having_neighborhood.hh: Rename into...
	* oln/core/abstract/image/neighborhood/hierarchy.hh: ...this file.
	* oln/core/abstract/image.hh (include): Update.
	* Makefile.am: Update.

2006-09-26  Roland Levillain  <roland@lrde.epita.fr>

	Have all classes of oln::automatic inherit from stc::any__simple.

	* oln/automatic/image_having_neighborhood.hh
	(impl<abstract::image_having_neighborhood, morpher::tag::identity, E>):
	Inherit from stc::any__simple<E> instead of abstract::image<E>.

2006-09-25  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Properly define fwd_piter_type and bkd_piter_type for the
	add_neighborhood image morpher.

	* oln/core/abstract/image_hierarchies.hh: Remove end blank line.
	* oln/core/gen/fwd_piter_bbox.hh (change_topology_): New.
	* oln/core/gen/bkd_piter_bbox.hh (change_topology_): New.
	* oln/morpher/add_neighborhood.hh (morpher_type): Remove; obsolete
	cause defined in super class.
	(fwd_piter_type, bkd_piter_type): New definitions.

2006-09-25  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Update image_extension, add_neighborhood, and some related
	classes.

	* oln/automatic/image.hh: New.
	* oln/core/abstract/image.hh: Include oln/automatic/image.hh.
	Inherit from automatic::impl.
	(has): Add FIXME.
	* oln/core/abstract/image_having_neighborhood.hh (neighborhood):
	Change so that it relies on topo().  impl_neighborhood() is now
	obsolete in image classes.
	* oln/core/2d/aliases.hh (topo2d, fwd_piter2d, bkd_piter2d):
	Update aliases.
	* oln/basics2d.hh: Update.
	* oln/core/2d/image2d.hh (topo2d, fwd_piter2d, bkd_piter2d):
	Update and make them explicit.
	(ctor): Add border argument with default.
	(impl_op_read): Change fake code.
	* oln/core/2d/neighb2d.hh: Cosmetics.
	* oln/core/gen/bbox.hh: Include files for piter types.
	* oln/morpher/internal/image_extension.hh (morpher_type): New.
	This class thus factors this definition.
	(impl_topo, impl_op_read, impl_has): Remove.  These methods
	are expected to be automatically fetch from top implementation
	classes.
	(self_t, image_t, topo_t, value_t, point_t): Remove cause obsolete.
	* oln/morpher/add_neighborhood.hh (add_neighborhood): Add second
	parameter Neighb.
	(include, set_super_type): Update.
	(neighborhood_type): Change.
	(ctor): Update.
	(impl_neighborhood): Remove.
	(impl_topo): New.
	(nbh_): Remove.
	(topo_): New.
	* tests/add_neighborhood_morpher.cc: Update.
	* tests/morphers.cc: Update.

2006-09-25  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Add morpher capabilities to topology classes.

	* oln/automatic/topology_having_bbox.hh: New.
	* oln/automatic/topology_being_random_accessible.hh: New.
	* oln/automatic/topology_having_neighborhood.hh: New.
	* oln/core/abstract/topology_having_neighborhood.hh: New.
	* oln/core/gen/topo_add_nbh.hh: New.
	* oln/core/internal/topology_morpher.hh: New.
	* oln/automatic/image_having_neighborhood.hh: Fix typo in guards.
	Fix comment.
	Fix delegation code.
	* oln/core/topology_entry.hh (neighborhood_type, morpher_type):
	New.
	* oln/core/abstract/topology_hierarchies.hh
	(topology_hierarchy_wrt_neighborhood): New.
	Update include.
	* oln/core/abstract/topology_having_bbox.hh: Inherit from
	automatic::impl.
	* oln/core/abstract/topology_being_random_accessible.hh: Likewise.
	* oln/core/abstract/topology.hh (neighborhood): New vtype.

2006-09-25  Roland Levillain  <roland@lrde.epita.fr>

	Fix the distribution (again).

	* oln/Makefile.am (nobase_oln_HEADERS): Add
	core/internal/bbox_bkd_piter.hh and
	core/internal/bbox_fwd_piter.hh.

2006-09-25  Roland Levillain  <roland@lrde.epita.fr>

	Add convenience shortcuts for stc_{direct_,}check_type_of{_,}.

	* oln/core/macros.hh (oln_check_type_of, oln_check_type_of_)
	(oln_check_direct_type_of, oln_check_direct_type_of_): New macros.
	* oln/morpher/internal/image_extension.hh, oln/morpher/identity.hh
	* oln/morpher/add_neighborhood.hh: Remove FIXMEs.

2006-09-25  Roland Levillain  <roland@lrde.epita.fr>

	Fix the distribution.

	* oln/Makefile.am (nobase_oln_HEADERS): Add morpher/tags.hh.

2006-09-24  Roland Levillain  <roland@lrde.epita.fr>

	Restore the compatibility of morphers with G++ 4.0.

	* oln/core/macros.hh (oln_direct_type_of, oln_direct_type_of_):
	New macros.
	* oln/morpher/internal/image_extension.hh (oln): Use
	`oln_direct_type_of(Exact, ...)' instead of
	`oln_type_of(self_t, ...)'.
	* tests/morphers.cc (main): Add more static assertions.
	* tests/identity_morpher.cc: More documentation.
	* tests/add_neighborhood_morpher.cc: New test.
	* tests/Makefile.am (check_PROGRAMS): Add
	add_neighborhood_morpher.
	(add_neighborhood_morpher_SOURCES): New.

2006-09-22  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Add image point iterators parameterized by the image topology;
	factor code into an internal class.

	* oln/core/gen/bbox_fwd_piter.hh: Change inheritance and move
	methods into...
	* oln/core/internal/bbox_fwd_piter.hh: ...this new class.
	* oln/core/gen/bbox_bkd_piter.hh: Change inheritance and move
	methods into...
	* oln/core/internal/bbox_bkd_piter.hh: ...this new class.
	* oln/core/gen/fwd_piter_bbox.hh: New.
	* oln/core/gen/bkd_piter_bbox.hh: New.

2006-09-20  Roland Levillain  <roland@lrde.epita.fr>

	Fix the identity and neighborhood addition morphers.

	* oln/automatic/image_having_neighborhood.hh: Add a forward
	declaration of oln::abstract::image_having_neighborhood.
	(impl<abstract::image_having_neighborhood, morpher::tag::identity, E>):
	Inherit from abstract::image<E>.
	(impl_neighborhood): Make it const.
	Get the exact type before calling delegate().
	* oln/core/abstract/image_having_neighborhood.hh
	(oln/automatic/image_having_neighborhood.hh): Include it.
	(oln::abstract::image_having_neighborhood::neighborhood): New.
	(case_<image_hierarchy_wrt_neighborhood, E, 1>): Only inherit from
	oln::abstract::image_having_neighborhood if neighborhood is
	different from mlc::not_found.
	(oln::ext_vtype<image_entry<E>, typedef_::neighborhood_type>):
	Remove.
	* oln/core/image_entry.hh
	(single_vtype<image_entry<E>, typedef_::morpher_type>): Remove.
	Instead, defined the `morpher' virtual type...
	(vtypes< image_entry<E> >): ...here.

	* oln/morpher/internal/image_extension.hh (image_extension):
	Fix the inheritance: derive from `oln::image_entry<Exact>' instead
	of `oln::image_entry< image_extension<Image, Exact> >'.
	* oln/morpher/identity.hh (oln/morpher/tags.hh): Include it.
	(oln::single_vtype<morpher::identity<Image>, typedef_::morpher_type>):
	Remove.
	Instead, defined the `morpher' virtual type...
	(oln::vtypes< morpher::identity<Image> >): ...here
	(oln::morpher::tag::identity): Move...
	* oln/morpher/tags.hh: ...here (new file).
	* oln/morpher/add_neighborhood.hh (oln/morpher/tags.hh)
	(oln/core/2d/aliases.hh): Include them.
	(oln::single_vtype<morpher::add_neighborhood<Image>,
	 typedef_::morpher_type>): Remove.
	Instead, defined the `morpher' virtual type...
	(oln::vtypes< morpher::add_neighborhood<Image> >): ...here
	(oln::morpher::add_neighborhood::neighborhood_t): Fix the virtual
	type retrieval: get it from `self_t', not from `Image'.
	(ext_vtype<morpher::add_neighborhood< oln::image2d<T> >,
	 typedef_::neighborhood_type>): Remove.
	Remove corresponding forward declarations as well.
	(oln::morpher::tag::add_neighborhood): Move...
	* oln/morpher/tags.hh: ...here.
	* tests/identity_morpher.cc, tests/morphers.cc: Fix the test.
	Add more static assertions.

	* oln/Makefile.am (nobase_oln_HEADERS): Add core/2d/neighb2d.hh,
	core/abstract/neighborhood.hh, core/gen/neighb.hh and
	core/neighborhood_entry.hh.
	* oln/core/2d/image2d.hh: Fix copyright header.

2006-09-20  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Add classes for classical 2d neighborhood.

	* oln/core/neighborhood_entry.hh: New.
	* oln/core/abstract/neighborhood.hh: New.
	* oln/core/2d/neighb2d.hh: New.
	* oln/core/gen/neighb.hh: New.
	* oln/core/2d/aliases.hh (neighb2d): New.
	* oln/basics2d.hh: Update.

2006-09-18  Roland Levillain  <roland@lrde.epita.fr>

	Add the first two morphers: identity and neighborhood addition.

	* oln/core/typedefs.hh (morpher_type, neighborhood_type): New
	typedef declarations.
	(neighb_type, image_neighbness_type, image_constness_type)
	(image_dimension_type, image_typeness_type)
	(image_valuedness_type, image_rawness_type): Remove typedef
	declarations.
	* oln/core/image_entry.hh
	(single_vtype<image_entry<E>, typedef_::morpher_type>): New
	virtual type.
	* oln/core/abstract/image.hh: Check it.

	* oln/core/abstract/image_hierarchies.hh
	(image_dimension_hierarchy, image_type_hierarchy): Rename as...
	(image_hierarchy_wrt_dimension, image_hierarchy_wrt_type):
	...this.
	(image_neighborhood_hierarchy): Make it the third image hierarchy.
	Rename as...
	(image_hierarchy_wrt_neighborhood).
	(image_value_hierarchy, image_rawness_hierarchy): Adjust and
	rename as...
	(image_hierarchy_wrt_value, image_hierarchy_wrt_data_retrieval):
	...this.
	(oln/core/abstract/image_having_neighborhood.hh): Include it.
	* oln/core/abstract/image_dimension.hh:
	s/image_dimension_hierarchy/image_hierarchy_wrt_dimension/.
	(oln::abstract::image1d, oln::abstract::image2d)
	(oln::abstract::image3d): Inherit from automatic::impl.
	* oln/core/abstract/image_type.hh,
	* oln/core/abstract/image_type_integre.hh:
	s/image_type_hierarchy/image_hierarchy_wrt_type/.
	* oln/core/abstract/image_having_neighborhood.hh: New
	abstraction.
	* oln/automatic/image_having_neighborhood.hh: New automatic
	implementation.

	* oln/morpher/internal/image_extension.hh: New abstract
	class.
	* oln/morpher/identity.hh,
	* oln/morpher/add_neighborhood.hh: New morphers.
	* tests/morphers.cc, tests/identity_morpher.cc: New tests.

	* oln/Makefile.am (nobase_oln_HEADERS): Catch up with renamings
	from the previous patches.
	Add automatic/image_having_neighborhood.hh,
	core/abstract/image_having_neighborhood.hh,
	morpher/internal/image_extension.hh,
	morpher/add_neighborhood.hh and
	morpher/identity.hh.
	* tests/Makefile.am (check_PROGRAMS): Add identity_morpher and
	morphers.
	(identity_morpher_SOURCES, morphers_SOURCES): New.
	* oln/core/abstract/topology_hierarchies.hh: Aesthetic changes.

2006-09-18  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Rename bbox point iterators.

	* oln/core/abstract/iterator_on_points.hh
	(p_): Remove.  Abstract classes should not have attributes.
	(to_point): Turn abstract.
	(point_adr): New.
	* oln/core/gen/fwd_piter.hh: Update and rename as...
	* oln/core/gen/bbox_fwd_piter.hh: ...this.
	* oln/core/gen/bkd_piter.hh: Update and rename as...
	* oln/core/gen/bbox_bkd_piter.hh: ...this.
	* oln/core/2d/aliases.hh: Update.
	* oln/core/gen/bbox.hh: Update.
	* oln/basics2d.hh: Update.

2006-09-18  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Move some abstract classes below entries into internal.

	* oln/core/abstract/point_nd.hh: Update and rename as...
	* oln/core/internal/point_nd.hh: ...this.
	* oln/core/abstract/dpoint_nd.hh: Update and rename as...
	* oln/core/internal/dpoint_nd.hh: ...this.
	* oln/core/point_set_entry.hh (is_connected_type): Add in vtypes.
	* oln/core/abstract/bbox.hh: Change super class from point_set_entry
	to point_set_having_bbox.
	(vtypes): Remove.
	(set_super_type): Remove.
	* oln/core/abstract/point_set_hierarchies.hh (include): Update.
	* oln/core/abstract/point_set_having_bbox.hh (case_): Move to...
	* oln/core/abstract/bbox.hh: ...this file.
	(case_): Refine for abstract::bbox.
	* oln/core/2d/dpoint2d.hh: Update.
	* oln/core/2d/point2d.hh: Update.
	* oln/core/gen/bbox.hh: Update.

2006-09-18  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Rename point set related classes.

	* oln/core/pset_entry.hh: Update and rename as...
	* oln/core/point_set_entry.hh: ...this.
	* oln/core/abstract/pset_fixed.hh: Update and rename as...
	* oln/core/abstract/point_set_having_known_size.hh: ...this.
	* oln/core/abstract/pset_ra.hh: Update and rename as...
	* oln/core/abstract/point_set_being_random_accessible.hh: ...this.
	* oln/core/abstract/pset_bboxed.hh: Update and rename as...
	* oln/core/abstract/point_set_having_bbox.hh: ...this.
	* oln/core/abstract/pset.hh: Update and rename as...
	* oln/core/abstract/point_set.hh: ...this.
	* oln/core/abstract/pset_hierarchies.hh: Update and rename as...
	* oln/core/abstract/point_set_hierarchies.hh: ...this.
	* oln/core/abstract/pset_cnx.hh: Update and rename as...
	* oln/core/abstract/point_set_being_connected.hh: ...this.
	* oln/core/abstract/piter.hh: Update and rename as...
	* oln/core/abstract/iterator_on_points.hh: ...this.
	* oln/core/abstract/iter.hh: Update and rename as...
	* oln/core/abstract/iterator.hh: ...this.
	* oln/core/typedefs.hh
	(fixed_type, ra_type, cnx_type): Rename as...
	(has_known_size_type, is_random_accessible_type): ...these and...
	(is_connected_type): ....this.
	* oln/core/abstract/bbox.hh: Update.
	* oln/core/gen/fwd_piter.hh: Update.
	* oln/core/gen/bkd_piter.hh: Update.

2006-09-18  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Add oln topology class for enlarged bbox.

	* oln/core/gen/topo_lbbox.hh: New.
	* oln/core/abstract/dpoint_nd.hh (set_all): New.
	* oln/core/gen/topo_bbox.hh (impl_has_large): New.

2006-09-15  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Adapt topology hierarchy to new naming convention.

	* oln/core/topo_entry.hh: Rename into...
	* oln/core/topology_entry.hh: ...this.
	* oln/core/abstract/topo.hh: Rename into...
	* oln/core/abstract/topology.hh: ...this.
	* oln/core/abstract/topo_with_bbox.hh: Rename into...
	* oln/core/abstract/topology_having_bbox.hh: ...this.
	* oln/core/abstract/topo_hierarchies.hh: Rename into...
	* oln/core/abstract/topology_hierarchies.hh: ...this.
	* oln/core/abstract/topo_ra.hh: Rename into...
	* oln/core/abstract/topology_being_random_accessible.hh: ...this.
	* oln/core/gen/bbox_topo.hh: Rename into...
	* oln/core/gen/topo_bbox.hh: ...this.
	* oln/core/typedefs.hh (is_random_accessible_type): New.
	* oln/core/2d/aliases.hh: Update.
	* oln/basics2d.hh: Update.
	* oln/Makefile.am: Update.

2006-09-15  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Add operator- to n-dimensional dpoint types.

	* oln/core/traits_id.hh (op_uminus_dpointnd): New.
	* oln/core/abstract/dpoint_nd.hh (operator-): New.
	(impl_less): New.
	(case_): New case for operator-.
	* oln/core/2d/dpoint2d.hh (dpoint2d_): New ctor.

2006-09-15  Roland Levillain  <roland@lrde.epita.fr>

	Add a missing file to the distribution.

	* oln/Makefile.am (nobase_oln_HEADERS): Add core/abstract/piter.

2006-09-14  Roland Levillain  <roland@lrde.epita.fr>

	* oln/Makefile.am (nobase_oln_HEADERS): Typo.

2006-09-14  Roland Levillain  <roland@lrde.epita.fr>

	Use the new entry/hierarchy system for images.

	* oln/core/abstract/image_entry.hh: Remove.
	* oln/core/abstract/image_hierarchies.hh: New.
	* oln/core/abstract/image.hh
	(oln/core/abstract/image_hierarchies.hh): Include it.
	* oln/core/image_entry.hh: Aesthetic change.

	* oln/core/abstract/image_dimension.hh:
	Update the documentation.
	(oln::ERROR::UNKNOWN_GRID_TYPE): Remove error message.
	(oln::grid_dim_tag): Remove tag.
	(stc::set_entry_node<I, oln::abstract::dimension_tag>): Remove
	switch.
	(case_<grid_dim_tag, grid_type, 1>)
	(case_<grid_dim_tag, grid_type, 2>)
	(case_<grid_dim_tag, grid_type, 3>): Update and rename as...
	(case_<image_dimension_hierarchy, E, 1>)
	(case_<image_dimension_hierarchy, E, 2>)
	(case_<image_dimension_hierarchy, E, 3>): ...this.
	(default_case_<grid_dim_tag, grid_type>): Remove.
	(oln::ext_vtype<abstract::image<I>, typedef_::image_dimension_type>):
	Remove external vtype.

	* oln/core/abstract/image_typeness.hh: Rename as...
	* oln/core/abstract/image_type.hh: ...this.
	Adjust header guards.
	Update the documentation.
	(oln::value_type_tag): Remove tag.
	(stc::set_entry_node<I, oln::abstract::typeness_tag>): Remove
	switch.
	(case_<value_type_tag, value_type, 1>)
	(case_<value_type_tag, value_type, 2>)
	(default_case_<value_type_tag, value_type>): Update and rename
	as...
	(case_<image_type_hierarchy, E, 1>)
	(case_<image_type_hierarchy, E, 2>)
	(default_case_<image_type_hierarchy, E>): ...this.
	No longer provide an `image_typeness_type' typedef.
	(oln::ext_vtype<abstract::image<I>, typedef_::image_typeness_type>):
	Remove external vtype.

	* oln/core/abstract/image_typeness_integre.hh: Rename as...
	* oln/core/abstract/image_type_integre.hh: ...this.
	Adjust header guards.
	(case_<value_type_tag, value_type, 3>)
	(case_<value_type_tag, value_type, 4>)
	(case_<value_type_tag, value_type, 5>)
	(case_<value_type_tag, value_type, 6>): Update and rename as...
	(case_<image_type_hierarchy, E, 3>)
	(case_<image_type_hierarchy, E, 4>)
	(case_<image_type_hierarchy, E, 5>)
	(case_<image_type_hierarchy, E, 6>): ...this.
	No longer provide an `image_typeness_type' typedef.

	* tests/image_entry.cc (my::image): Set
	oln::image_entry<my::image> as super type.
	(oln::vtypes<my::image>::psite_type)
	(oln::vtypes<my::image>::rvalue_type)
	(oln::vtypes<my::image>::piter_type): Remove these typedefs, as
	they are already defined as single typedefs in
	oln/core/image_entry.hh.
	(my::image::grid_type, my::image::value_type): Rename as...
	(my::image::grid_t, my::image::value_t): ...this.
	(my::image::image_dimension_type, my::image::image_typeness_type):
	Remove.
	(main): Adjust, and remove irrelevant assertions.

2006-09-14  Roland Levillain  <roland@lrde.epita.fr>

	Add missing files to Olena's distribution.

	* oln/Makefile.am (nobase_oln_HEADERS): Add core/2d/aliases.hh,
	core/2d/dpointd2.hh, core/2d/grid2d.hh, core/2d/image2d.hh,
	core/2d/point2d.hh, core/abstract/bbox.hh,
	core/abstract/dpoint.hh, core/abstract/dpoint_nd.hh,
	core/abstract/entry.hh, core/abstract/image_hierarchies.hh,
	core/abstract/image_type.hh, core/abstract/image_type_integre.hh,
	core/abstract/iter.hh, core/abstract/point.hh,
	core/abstract/point_nd.hh, core/abstract/pset_bboxed.hh,
	core/abstract/pset_cnx.hh, core/abstract/pset_fixed.hh,
	core/abstract/pset.hh, core/abstract/pset_hierarchies.hh,
	core/abstract/pset_ra.hh, core/abstract/topo.hh,
	core/abstract/topo_hierarchies.hh, core/abstract/topo_ra.hh,
	core/abstract/topo_with_bbox.hh, core/gen/bbox.hh,
	core/gen/bbox_topo.hh, core/gen/bkd_piter.hh,
	core/gen/fwd_piter.hh, core/image_entry.hh, core/pset_entry.hh,
	core/traits.hh, core/traits_id.hh, core/topo_entry.hh,
	core/type.hh and basics2d.hh
	Remove core/abstract/image_abstractions.hh,
	core/abstract/image_entry.hh, core/abstract/image_typeness.hh, and
	core/abstract/image_typeness_integre.hh.
	* oln/basics2d.hh: Fix copyright header.

2006-09-13  Roland Levillain  <roland@lrde.epita.fr>

	No longer categories nor packed_vtypes.

	* oln/core/abstract/image.hh (oln::category::grid): Remove
	declaration.
	* oln/core/abstract/grid.hh
	(oln::packed_vtypes_in_category<category::grid, G>):
	(oln::grid::~grid): Remove dtor.
	(oln::category::grid): Remove declaration.

2006-09-12  Roland Levillain  <roland@lrde.epita.fr>

	Fix the current implementation of image_entry, as well as some
	tests.

	* oln/core/abstract/internal/image_impl.hh (oln::category::image):
	Move this declaration...
	* oln/core/abstract/image.hh: ...here.
	* oln/core/case.hh: New file.
	* oln/core/abstract/image_abstractions.hh,
	* oln/core/abstract/entry.hh,
	* oln/core/traits.hh: Use it.
	* oln/Makefile.am (nobase_oln_HEADERS): Add core/case.hh.

	* oln/core/abstract/image_dimension.hh
	(oln::ERROR::UNKNOWN_GRID_TYPE): New.
	(oln::default_case_<grid_dim_tag, grid_type): Use it.
	(ext_vtype_in_category): Turn into...
	(ext_vtype): ...this.
	* oln/core/abstract/image_typeness.hh (ext_vtype_in_category):
	Turn into...
	(ext_vtype): ...this.

	* oln/core/typedefs.hh (oln_type_of, oln_type_of_): Move
	these macros...
	* oln/core/abstract/macros.hh: ...here, and replace the previous
	ones.
	Rename file as...
	* oln/core/macros.hh: ...this.
	Adjust header guards.
	* oln/core/abstract/internal/image_impl.hh: Adjust users.
	* oln/Makefile.am (nobase_oln_HEADERS): Remove
	core/abstract/macros.hh.
	Add core/macros.hh

	* oln/core/abstract/grid.hh (oln_grd_type_of, oln_grd_type_of_):
	Remove macros.
	(vtypes_in_category< category::grid, abstract::grid<G> >): Turn
	into...
	(vtypes< abstract::grid<G> >): ...this.
	(packed_vtypes_in_category<category::grid, G>):
	s/oln_grd_type_of/oln_type_of/g.
	* oln/core/1d/grid1d.hh, oln/core/2d/grid2d.hh,
	* oln/core/3d/grid3d.hh (vtypes_in_category): Turn into...
	(vtypes): ...this.

	* tests/grid.cc: s/oln_grd_type_of_/oln_type_of_/g
	* tests/image_entry.cc (my::dummy): New declaration.
	(vtypes_in_category<category::image, my::image>): Turn into...
	(vtypes<my::image>): ...this.
	Add missing virtual types.
	(my::image): Fix base class.
	(main): Remove any references to
	packed_vtypes_in_category<oln::category::image, my::image>, since
	it no longer exists.
	* tests/Makefile.am (AM_CPPFLAGS): Add -I$(top_srcdir)/extended.

2006-09-07  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Add image2d and fix topo-related classes.

	* tests/npoints.cc: New.
	* tests/Makefile.am: Update.
	* oln/core/image_entry.hh: New.
	* oln/core/2d/image2d.hh: New.
	* oln/basics2d.hh: Force instantiation and include
	oln/core/2d/image2d.hh.
	* oln/core/typedefs.hh: Include mlc/assert.hh and
	mlc/to_string.hh.
	(piter_type): Uncomment.
	(rvalue_type): New.
	(psite_type): New.
	(concrete_type): Uncomment.
	(size_type): Add comment.
	(topo_type): New.
	* oln/core/abstract/topo.hh (bbox): Remove this method which
	is redundant with the one of topo_with_bbox.
	* oln/core/abstract/topo_with_bbox.hh (bbox): Fix typo.
	* oln/core/abstract/entry.hh (next_entry_node): New
	specialization to handle the specific and rare case of having no
	sub-hierarchy.
	* oln/core/abstract/topo_ra.hh: Fix cut n paste errors.
	* oln/core/abstract/pset.hh (piter): New vtype decl.
	* oln/core/gen/fwd_piter.hh (fwd_piter_): Add commented
	forthcoming ctors.
	* oln/core/gen/bbox_topo.hh: Cosmetics.
	* oln/core/pset_entry.hh (piter_type): New.
	* oln/core/abstract/image.hh: Update.

2006-09-07  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Start the topology hierarchy.

	* oln/core/topo_entry.hh: New.
	* oln/core/abstract/topo.hh: New.
	* oln/core/abstract/topo_hierarchies.hh: New.
	* oln/core/abstract/topo_with_bbox.hh: New.
	* oln/core/abstract/topo_ra.hh: New.
	* oln/core/gen/bbox_topo.hh: New.
	* oln/core/2d/aliases.hh (topo2d): New.

	Add a new sub-hierarchy to abstract::pset.

	* oln/core/abstract/pset_cnx.hh: New.
	* oln/core/typedefs.hh (cnx_type): New.
	* oln/core/abstract/pset_hierarchies.hh (pset_cnx_hierarchy): New.
	* oln/core/abstract/bbox.hh (cnx_type): New.
	* oln/core/abstract/pset_bboxed.hh (is_valid): Move this method into...
	* oln/core/abstract/pset.hh (pset): ...this class.
	(dim): New vtype.
	* oln/core/pset_entry.hh (single_vtype): Add vtype dim.
	* oln/basics2d.hh: Include oln/core/gen/bbox_topo.hh.

2006-09-06  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Update abstract::pset hierarchy to final SCOOP-2 design.

	* oln/core/pset_entry.hh: New.
	* oln/core/typedefs.hh: Include oln/core/abstract/entry.hh.
	* oln/core/abstract/bbox.hh: Clean includes.
	(set_super_type): Change from abstract::pset<E> to pset_entry<E>.
	(bbox): Update.
	* oln/core/abstract/entry.hh (set_super_type): New specialization.
	* oln/core/abstract/pset.hh (Copyright): Fix years.
	(vtypes, ext_vtype): Remove.
	(fixed_pset, ra_pset, bboxed_pset): Move and dispatch to...
	* oln/core/abstract/pset_fixed.hh: ...this new file.
	* oln/core/abstract/pset_ra.hh: ...this new file.
	* oln/core/abstract/pset_bboxed.hh: ...this new file.
	* oln/core/abstract/pset.hh
	(pset_fixed_hierarchy, pset_ra_hierarchy, pset_bboxed_hierarchy)
	(case_): Move to...
	* oln/core/abstract/pset_hierarchies.hh: ...this new file.

2006-09-05  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Test on abstract::pset alternative code for static inheritance.

	* oln/core/abstract/entry.hh: New proposition for entry class in
	static hierarchies.  This is a test file that should be removed
	after stc update.
	* oln/core/typedefs.hh (fixed_type, ra_type, bbox_type): New
	typedef declarations.
	* oln/core/abstract/bbox.hh (fwd_piter_, bkd_piter_): Remove
	these forward declarations.
	(ext_vtype): Remove.
	(vtypes): New.
	(ra_type, fixed_type, bbox_type): New associated types.
	(bbox): Change inheritance from abstract::pset to an entry class.
	(bbox): Remove all methods except print from this class; the
	methods are dispatched into abstract::bboxed_pset and
	gen::bbox_<P>.
	(bbox): Likewise for attributes.
	(print): Reject code to subclasses.
	(impl_bbox): New method.
	* oln/core/abstract/pset.hh: Include entry.hh.
	(fwd_piter_type, bkd_piter_type): New associated types.
	(bbox_type, ra_type, fixed_type): Likewise
	(pset): Add virtual to inheritance.
	(~pset): Extend check code.
	(fixed_pset, ra_pset, bboxed_pset): New sub-abstractions.
	(pset_fixed_hierarchy, pset_ra_hierarchy, pset_bboxed_hierarchy):
	New hierarchy tags.
	* oln/core/gen/bbox.hh: Update.
	(operator=): New.

2006-09-04  Roland Levillain  <roland@lrde.epita.fr>

	Adjust virtual types class names.

	* oln/core/abstract/image.hh,
	* oln/core/abstract/image_dimension.hh,
	* oln/core/abstract/image_typeness.hh,
	* oln/core/abstract/grid.hh, oln/core/1d/grid1d.hh,
	* oln/core/2d/grid2d.hh, oln/core/3d/grid3d.hh,
	* tests/image_entry.cc (vtypes): Rename as...
	(vtypes_in_category): ...this.
	* oln/core/abstract/image.hh, oln/core/abstract/grid.hh,
	* tests/image_entry.cc (packed_vtypes): Rename as...
	(packed_vtypes_in_category): ...this.

	* oln/core/abstract/point.hh, oln/core/abstract/dpoint.hh,
	* oln/core/abstract/piter.hh, oln/core/abstract/pset.hh,
	* oln/core/gen/bbox.hh,
	* oln/core/gen/bkd_piter.hh, oln/core/gen/fwd_piter.hh,
	* oln/core/2d/point2d.hh, oln/core/2d/dpoint2d.hh (vtypes_):
	Rename as...
	(vtypes).
	* oln/core/abstract/pset.hh, oln/core/abstract/bbox.hh
	(ext_vtype_): Rename as...
	(ext_vtype): ...this.

2006-09-04  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Test how to define derived associated types in bbox hierarchy.

	* oln/core/abstract/bbox.hh (ext_vtype_): New definitions of
	fwd_piter_type and bkd_piter_type.
	(~bbox): Comment possible recursive code.
	* oln/core/gen/bbox.hh (vtypes_): Comment former definitions of
	fwd_piter_type and bkd_piter_type.
	* oln/core/abstract/pset.hh (ext_vtype_): New definition for grid.
	(fwd_piter_type, bkd_piter_type): Comment because they are now
	externally defined.

2006-09-01  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	* oln/core/abstract/piter.hh (to_point): New.
	* oln/core/abstract/bbox.hh (pmin, pmax): New overloaded methods.
	(is_valid, print, operator<<): New.
	* oln/core/abstract/iter.hh (iter): Change inheritance from
	any__simple to any__best_memory to fix trouble with multiple
	inheritance.
	(ctor): Remove dangerous call to invalidate.
	* oln/core/abstract/point_nd.hh (operator<<): New.
	(impl_less): Update.
	* oln/core/abstract/pset.hh (coord_type): New.
	* oln/core/2d/point2d.hh (coord_t): Move to public so that this
	associated type is directly accessible from...
	* oln/core/gen/bbox.hh (vtypes): ...this set of types.
	* oln/core/gen/fwd_piter.hh (psup_): Remove.
	(bbox): New accessor.
	(impl_next): Rewrite.
	(print, operator<<): New.
	(invariant): Strengthen.
	* oln/core/gen/bkd_piter.hh: Likewise.

2006-09-01  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Add bboxes and iterators.

	* oln/core/abstract/piter.hh: New.
	* oln/core/abstract/bbox.hh: New.
	* oln/core/abstract/iter.hh: New.
	* oln/core/abstract/pset.hh: New.
	* oln/core/2d/aliases.hh: New.
	* oln/core/gen/fwd_piter.hh: New.
	* oln/core/gen/bkd_piter.hh: New.
	* oln/core/gen/bbox.hh: New.
	* oln/core/2d/point2d.hh (point2d_): New ctor.
	(point2d, dpoint2d, point2df, dpoint2df): Move typedefs to...
	* oln/basics2d.hh: ...this new file.
	* oln/core/typedefs.hh (oln_type_of_): New macro.
	(include): Update.
	(fwd_piter_type, bkd_piter_type): New decls.
	* oln/core/abstract/point.hh (include): Update.
	(vtypes_): New specialization.
	* oln/core/abstract/dpoint.hh: Likewise.
	* oln/core/abstract/point_nd.hh (include): Update.
	(set_super_type): New specialization.
	* oln/core/abstract/dpoint_nd.hh: Likewise.

2006-08-31  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Add dpoint, oln traits, and operators on point/dpoint.

	* oln/core/type.hh: New.
	* oln/core/traits_id.hh: New.
	* oln/core/abstract/dpoint.hh: New.
	* oln/core/abstract/dpoint_nd.hh: New.
	* oln/core/traits.hh: New.
	* oln/core/2d/dpoint2d.hh: New.
	* oln/core/abstract/point.hh (point): Add inheritance to
	oln::type.
	(operators): New.
	* oln/core/abstract/point_nd.hh (point_): New meta-function.
	(impl_eq): Rename as...
	(impl_equal): ...this.
	(coord): Rename as...
	(coord_t): ...this.
	(impl_less): New.
	(impl_plus_equal, impl_plus): New.
	(impl_minus_equal, impl_minus, impl_minus): New.
	(vec): New.
	(case_): New specializations.
	(point_nd): New ctor.
	* oln/core/2d/point2d.hh: Update forward declarations.
	(point_, dpoint_): New specializations.
	(point2d): New ctor.
	(coord): Rename as...
	(coord_t): ...this.

2006-08-30  Thierry GERAUD  <theo@tegucigalpa.lrde.epita.fr>

	Start point hierarchy.

	* oln/core/typedefs.hh (oln_type_of): New macro.
	(dim_type): New typedef decl.
	* oln/core/abstract/point.hh: New.
	* oln/core/abstract/point_nd.hh: New.
	* oln/core/2d/point2d.hh: New.

2006-06-05  Roland Levillain  <roland@lrde.epita.fr>

	Catch up with Static's support for multiple inheritance.

	* oln/core/1d/grid1d.hh, oln/core/2d/grid2d.hh,
	* oln/core/3d/grid3d.hh: s/stc_super_/stc_get_supers/.
	* tests/image_entry.cc: Add a missing `public' qualifier for
	exported types.

2006-05-02  Roland Levillain  <roland@lrde.epita.fr>

	Fix a duplicate where-clause and perform some aesthetic changes in
	image abstractions.

	* oln/core/abstract/image_dimension.hh: Move the static switch
	statement before the cases.
	Aesthetic changes.
	* oln/core/abstract/image_typeness.hh: Likewise.
	(case_<value_type_tag, value_type, 2>): Fix a copy-and-paste bug:
	remove a duplicate `unsigned char' type in the where-clause and
	replace it with `signed char'.
	* oln/core/abstract/image_typeness_integre.hh,
	* tests/image_entry.cc: Aesthetic changes.

2006-04-27  Roland Levillain  <roland@lrde.epita.fr>

	Add image ``typeness'' abstraction hierarchy.

	* tests/image_entry.cc (my): Check image_typeness_type vtype and
	inheritance.
	* oln/core/typedefs.hh (value_type, image_typeness_type): Enable
	typedef.
	* oln/core/abstract/image.hh (vtypes::value_type): Enable typedef.
	(packed_vtypes::value_type): New typedef.
	(packed_vtypes::echo): Print value_type and image_typeness_type.
	(packed_vtypes::ensure): Check value_type and image_typeness_type.
	(image::value_type): Enable typedef.
	* oln/core/abstract/image_entry.hh: Include images abstractions
	headers.
	Don't include mlc/case.hh nor oln/core/abstract/image.hh.
	(mlc_case_equipment_for_namespace(oln))
	(abstraction_tags): Move...
	* oln/core/abstract/image_abstractions.hh: ...here (new file).
	* oln/core/abstract/image_dimension.hh: Include it.
	Include stc/entry.hh.
	Aesthetic changes.
	* oln/core/abstract/image_typeness.hh: New file (imported from
	Olena proto-1.0, and modified).
	* oln/core/abstract/image_typeness_integre.hh: New file
	* oln/Makefile.am (nobase_oln_HEADERS): Add
	core/abstract/image_abstractions.hh,
	core/abstract/image_typeness.hh and
	core/abstract/image_typeness_integre.hh.

2006-04-25  Roland Levillain  <roland@lrde.epita.fr>

	* oln/core/abstract/image_dimension.hh: Add some more
	documentation.

2006-04-25  Roland Levillain  <roland@lrde.epita.fr>

	Re-enable exact_type vtype.

	* oln/core/typedefs.hh (oln_super_of_, oln_super2_of_)
	(oln_super3_of_, oln_super_of): Remove macros.
	(exact_type): Enable this typedef.
	* oln/core/abstract/image.hh (packed_vtypes::exact_type): New
	typedef.
	(packed_vtypes::echo): Print exact_type.
	(packed_vtypes::ensure): Check exact_type.

2006-04-25  Roland Levillain  <roland@lrde.epita.fr>

	* oln/core/typedefs.hh: s/properties/vtypes/.

2006-04-25  Roland Levillain  <roland@lrde.epita.fr>

	Catch up with the latest name changes in Static.

	* oln/core/abstract/image_dimension.hh
	(case_<grid_dim_tag, grid_type, 1>)
	(case_<grid_dim_tag, grid_type, 2>)
	(case_<grid_dim_tag, grid_type, 3>):
	s/stc::is_a/stc::abstraction_as_type/.
	* oln/core/abstract/macros.hh (oln_type_of, oln_type_of_)
	* oln/core/abstract/grid.hh (oln_grd_type_of, oln_grd_type_of_):
	Catch up with the new names of Static macros.
	* tests/image_entry.cc: Adjust test.

2006-04-25  Roland Levillain  <roland@lrde.epita.fr>

	Plug image_entry's inheritance to the right image dimension
	abstraction according to the grid type of the exact image type.

	* oln/core/abstract/image_entry.hh: Add switch/case equipment in
	the oln namespace.
	* oln/core/abstract/image_dimension.hh
	(grid_dim_tag)
	(case_<grid_dim_tag, grid_type, 1>)
	(case_<grid_dim_tag, grid_type, 2>)
	(case_<grid_dim_tag, grid_type, 3>)
	(default_case_<grid_dim_tag, grid_type>): New Metalic switch/case
	on grid type, returning the corresponding image dimension type.
	(set_entry_node<I, oln::abstract::dimension_tag>): Use this Metalic
	switch/case to choose the dimension abstraction in the inheritance
	tree.
	* oln/core/abstract/image.hh (vtypes): Don't define
	image_dimension_type as an internal vtype, instead...
	* oln/core/abstract/image_dimension.hh
	(oln::ext_vtype<category::image, abstract::image<I>,
	typedef_::image_dimension_type>): ...define it externally, using
	the switch used inheritance-plugging mechanism based on the grid
	type.
	* tests/image_entry.cc (oln): Adjust.
	Check my::image's virtual types.
	Print my::image's vtypes on the standard output.

2006-04-25  Roland Levillain  <roland@lrde.epita.fr>

	Add grids.

	* oln/core/abstract/grid.hh,
	* oln/core/1d/grid1d.hh,
	* oln/core/2d/grid2d.hh,
	* oln/core/3d/grid3d.hh: New files (imported from Olena proto-1.0,
	and modified).
	* oln/core/typedefs.hh (grid_type, point_type, dpoint_type)
	(size_type, dimvalue_type, coord_type): Enable these types.
	* oln/core/abstract/image.hh (grid_type): Don't mlc-declare this
	typedef, since oln/core/typedefs.hh already takes care of it.
	(vtypes< category::image, abstract::image<I> >): Enable	grid_type.
	(packed_vtypes): Likewise.
	* oln/core/abstract/internal/image_impl.hh: Improve comment.
	* tests/grid.cc: New test.
	* tests/image_entry.cc: Update this test.
	* oln/Makefile.am (nobase_oln_HEADERS): Add core/abstract/grid.hh,
	core/1d/grid1d.hh, core/2d/grid2d.hh and core/3d/grid3d.hh.
	* tests/Makefile.am (check_PROGRAMS): Add grid.
	(grid_SOURCES): New.

2006-04-22  Roland Levillain  <roland@lrde.epita.fr>

	Fix packed_vtypes<category::image, I>.

	* oln/core/abstract/image.hh (packed_vtypes): Remove.
	(packed_vtypes<category::image, I>): Use mlc::assert to test the
	virtual types.
	Aesthetic changes.
	(image::~image): Check the vtypes thanks to
	packed_vtypes<category::image, I>.

2006-04-21  Roland Levillain  <roland@lrde.epita.fr>

	Lay the foundation stone of abstract::image.

	* oln/core/abstract/any.hh, oln/core/typedefs.hh,
	* oln/core/abstract/image.hh,
	* oln/core/abstract/internal/image_impl.hh
	* oln/core/abstract/image_entry.hh
	* oln/core/abstract/image_dimension.hh: New files (imported from
	Olena proto-1.0, and modified).
	* oln/core/abstract/macros.hh: New file.
	* tests/image_entry.cc: New test.
	* Makefile.am, oln/Makefile.am, tests/Makefile.am: New files.
